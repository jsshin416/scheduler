<!DOCTYPE html>
<head>
	<meta charset="utf-8">

	<title>가입</title>
	<style>.context{
	text-align: center;
     border:1px solid #5F00FF;
      border-radius:8px;
      width:500px;
      height:500px;
     margin-left: auto;
     margin-right: auto;
      text-align: center; </style>
	<meta name ="description" content="My Parse App">
	<meta name ="viewport" content="width=device-width">

	 <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
	 <script type="text/javascript" src="https://npmcdn.com/parse/dist/parse.min.js"> </script>

	 </head> 

	 <body>
	  <div id="login", class= "context">
	  	 <h2> 회원가입 </h2>
	  	 <h4>아이디, 비밀번호, 이메일을 입력해 주세요.</h4>
	    <p> ID: <input type="text", id="id"> </p>
	    <p> PW: <input type= "password", id="password"> </p>
	    <p> Email: <input type="text" id="email"> </p>
	   	<p><input type= "button", value="SIGNUP" onclick="signup()">
	  </div>
	  <script type="text/javascript">
		  	Parse.initialize("ShinJiSung");
		    Parse.serverURL="https://polar-ocean-70851.herokuapp.com/parse"
            function signup(){
		    	var id = $("#id").val();
		    	var password = $("#password").val();
		    	var email =$("#email").val();
		    	var user = new Parse.User();

		    	if(Parse.User.current()){
		    		Parse.User.logOut();
		    	}

		    	if(id && password && email){
		    		user.set("username", id);
		    		user.set("password", password);
		    		user.set("email", email);

		    		user.signUp()
		    		.then((user) =>{
		    			alert("회원가입이 완료 되었습니다.\n"+"로그인 창으로 돌아갑니다.");
		    			window.location = "signin.html"
		    		}, (error) => {
		    			alert("가입에 실패하였습니다. : " + error.message);
		    		});
	               
		    	}
		    	else{
		    		alert("wrong data");
		    	}
	        }
			</script>
		</body>
</html>